<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2021-04-13T21:21:56+04:30</updated><id>/feed.xml</id><title type="html">H.U.E.</title><subtitle>I have created this blog to document my Electrical Engineering and Artificial Intelligence/Machine Learning journey. I mainly write about Deep Learning, Computer Vision/Image processing, Pytorch, OpenCV, Python, Microcontrollers (STM32, STM8, Arduino) and C/C++</subtitle><author><name>mh-salari</name></author><entry><title type="html">اجرای کدهای python در لینوکس با استفاده از systemd</title><link href="/autorun-a-python-script-using-systemd/" rel="alternate" type="text/html" title="اجرای کدهای python در لینوکس با استفاده از systemd" /><published>2020-05-29T05:07:00+04:30</published><updated>2020-05-29T05:07:00+04:30</updated><id>/autorun-a-python-script-using-systemd</id><content type="html" xml:base="/autorun-a-python-script-using-systemd/">&lt;p&gt;صوت مساله بسیار ساده‌ست، ما کد pythonمون رو نوشتیم، تست کردیم، حالا می‌خوایم بذاریمش یک گوشه به شکل دائم اجرا شه.&lt;br /&gt;
حداقل خواستمون اینه که:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;موقع روشن شدن سیستم کد به شکل خودکار اجرا شه&lt;/li&gt;
  &lt;li&gt;اگر در هر صورت خطایی رخ داد که باعث کرش کردن برنامه شد به شکل خودکار کدمون مجددا راه اندازی شده&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;در بین همه‌ی گزینه‌های ممکن برای انجام این کار systemd راحت‌ترین و سرراست ترین راه رسیدن به خواسته‌های بالاست و کیه که ندونه من چقدر تنبلی رو دوست دارم!&lt;/p&gt;

&lt;h2 id=&quot;ایجاد-یک-برنامهی-نمونه&quot;&gt;ایجاد یک برنامه‌ی نمونه:&lt;/h2&gt;

&lt;p&gt;اول یک برنامه ساده درست کنیم که صرفا یک متن رو در یک حلقه‌ی بینهایت هر یک دقیقه یک بار در انتهای یک فایل اضافه کنه:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/python
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;time&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sleep&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/dos/codes/systemd_demo.txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;# get further user input/do stuff here
&lt;/span&gt;            &lt;span class=&quot;nb&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sa&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; mississippi&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;این برنامه رو به اسم systemd_demo.py ذخیره می‌کنیم.&lt;/p&gt;

&lt;p&gt;اگر کد برنامه رو اجرا کنیم یک فایل به اسم systemd_demo.txt ایجاد خواهد شد:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/post-images/linux/autorun-a-python-script-using-systemd/systemd_tail.png&quot; alt=&quot;systemd tail&quot; /&gt;&lt;/p&gt;

&lt;p&gt;دقت کنید که برای اجرای این کد از آدرس کامل محیط آناکوندام و آدرس فایلم استفاده کردم، در مرحله‌ی بعد به این آدرس کامل احتیاج داریم.&lt;/p&gt;

&lt;p&gt;&lt;span style=&quot;color:red&quot;&gt;هشدار:&lt;/span&gt;. حتما یک بار توی ترمینال آدرس کامل رو بزنید و برنامه رو اجرا کنید، به خاطر ساختار import کردن ماژول‌ها و … در python ممکنه کد شما وقتی این شکلی اونو فرا می‌خونی با مشکل مواجه شه.&lt;/p&gt;

&lt;h2 id=&quot;ایجاد-فایل-service&quot;&gt;ایجاد فایل service:&lt;/h2&gt;

&lt;p&gt;با ویرایشگر دلخواهتون یک فایل با اسم مورد نظر خودتون (که مرتبط با اسم برنامه‌ای شما باشه) در آدرس /lib/systemd/system/ و با پسوند
service. ایجاد کنید.&lt;/p&gt;

&lt;p&gt;من از ویرایشگر nano استفاده می‌کنم، اگر nano رو نصب دارید کافیه در دستور زیر جای YOUR_SERVICE_NAME اسم مورد نظر خودتون رو بذارید.&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;nano /lib/systemd/system/YOUR_SERVICE_NAME.service&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt; &lt;/p&gt;

&lt;p&gt;ساختار کلی‌ای که برای ایجاد یک service لازم داریم به شکل زیره:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Unit]
&lt;span class=&quot;nv&quot;&gt;Description&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;YOUR SERVICE DESCRIPTION FOR HUMANS
&lt;span class=&quot;nv&quot;&gt;After&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;multi-user.target
&lt;span class=&quot;nv&quot;&gt;Conflicts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;getty@tty1.service

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Service]
&lt;span class=&quot;nv&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;simple
&lt;span class=&quot;nv&quot;&gt;ExecStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;YOUR PYTHON CODE EXECUTE COMMAND
&lt;span class=&quot;nv&quot;&gt;StandardInput&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;tty-force
&lt;span class=&quot;nv&quot;&gt;RemainAfterExit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;yes
&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;Restart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on-failure
&lt;span class=&quot;nv&quot;&gt;RestartSec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;5s

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Install]
&lt;span class=&quot;nv&quot;&gt;WantedBy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;multi-user.target
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;در ساختار بالا:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;بجای YOUR SERVICE DESCRIPTION FOR HUMANS توضیحات مرتبط با اینکه این کد/سرویس چی هست رو می‌نویسیم.&lt;/li&gt;
  &lt;li&gt;بجای YOUR PYTHON CODE EXECUTE COMMAND دستور اجرای فایل خودمون وارد می‌کنیم.&lt;/li&gt;
  &lt;li&gt;اگر می‌خوایم بعد از اتمام حلقه‌ی اصلی برنامه python اون service فعال بمونه مقدار RemainAfterExit رو برابر yes قرار می‌دیم.&lt;/li&gt;
  &lt;li&gt;همچنین پارامتر RestartSec مقدار تاخیر هنگام اجرای مجدد کدمون رو مشخص می‌کنه.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ساختار فایل بالا رو من برای انجام برنامه‌ی مثال این پست به شکل زیر ویرایش کردم:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/post-images/linux/autorun-a-python-script-using-systemd/systemd_demo_service-1.png&quot; alt=&quot;systemd demo service-1&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;فعال-سازی-و-اجرای-service&quot;&gt;فعال سازی و اجرای service:&lt;/h2&gt;

&lt;p&gt;هر بار که ما در آدرس /lib/systemd/system/ فایلی می‌سازیم و یا در اون فایل‌ها تغییری ایجاد می‌کنیم نیازه تا systemctl رو راه اندازی مجدد کنیم تا تغییراتمون اعمال بشن، این کار با دستور زیر انجام می‌شه:&lt;/p&gt;

&lt;p&gt; &lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl daemon-reload&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt; 
حال با دستورات زیر می‌تونیم serviceای که ایجاد کردیم رو مدیریت کنیم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c&quot;&gt;#To enable running service&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;YOUR_SERVICE_NAME.service

&lt;span class=&quot;c&quot;&gt;#To stop running service&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl stop YOUR_SERVICE_NAME.service

&lt;span class=&quot;c&quot;&gt;#To start running service&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl start YOUR_SERVICE_NAME.service

&lt;span class=&quot;c&quot;&gt;#To restart running service&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl restart YOUR_SERVICE_NAME.service
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;اگر همه‌چیز به خوبی پیش رفته باشه چنین خروجی‌ای خواهید دید و دیتا شروع می‌کنه وارد فایل systemd_demo.txt شدن.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/post-images/linux/autorun-a-python-script-using-systemd/sysemd_status.png&quot; alt=&quot;sysemd status&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;منابع&quot;&gt;منابع:&lt;/h2&gt;

&lt;div dir=&quot;ltr&quot;&gt;

&lt;a href=&quot;https://singlebrook.com/2017/10/23/auto-restart-crashed-service-systemd/&quot;&gt;Auto-recovery of crashed services with systemd&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://tecadmin.net/setup-autorun-python-script-using-systemd/&quot;&gt;How To Setup Autorun a Python Script Using Systemd&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/torfsen/python-systemd-tutorial&quot;&gt;Writing a systemd Service in Python&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/44136655/why-standardinput-tty-in-oneshot-systemd-unit-files&quot;&gt;https://stackoverflow.com/questions/44136655/why-standardinput-tty-in-oneshot-systemd-unit-files&lt;/a&gt;&lt;br /&gt;

&lt;/div&gt;</content><author><name>MohammadHossein Salari</name></author><category term="Linux" /><category term="Python" /><category term="Linux" /><summary type="html">صوت مساله بسیار ساده‌ست، ما کد pythonمون رو نوشتیم، تست کردیم، حالا می‌خوایم بذاریمش یک گوشه به شکل دائم اجرا شه. حداقل خواستمون اینه که:</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/post-images/linux/autorun-a-python-script-using-systemd/python_systemd.png" /><media:content medium="image" url="/assets/post-images/linux/autorun-a-python-script-using-systemd/python_systemd.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">اعمال مقدماتی بر روی عکس در OpenCV</title><link href="/basic-image-operations-in-opencv/" rel="alternate" type="text/html" title="اعمال مقدماتی بر روی عکس در OpenCV" /><published>2018-01-31T13:53:59+03:30</published><updated>2018-01-31T13:53:59+03:30</updated><id>/basic-image-operations--in-opencv</id><content type="html" xml:base="/basic-image-operations-in-opencv/">&lt;p&gt;در این نوشته یاد می‌گیرم که چطور یک عکس رو در OpenCV بخوانیم، روی اون اعمال مقدماتی‌ای همچون تغییر اندازه، برش، چرخش، تبدیل رنگ عکس به خاکستری و … رو انجام دهیم، عکس رو نمایش بدهیم و در نهایت نتیجه رو با فرمت دلخواه دخیره کنیم.&lt;/p&gt;

&lt;h2 id=&quot;خواندن-نمایش-تغییر-رنگ-و-ذخیرهی-عکس-در-opencv&quot;&gt;خواندن، نمایش، تغییر رنگ و ذخیره‌ی عکس در OpenCV:&lt;/h2&gt;

&lt;p&gt;در OpenCV جهت خواندن عکس از دستور &lt;em&gt;imread&lt;/em&gt; جهت دخیره ی تصویر در حافظه از &lt;em&gt;imwrite&lt;/em&gt; و جهت نمایش آن از دستور &lt;em&gt;imshow&lt;/em&gt; استفاده می‌کنیم:&lt;/p&gt;

&lt;p&gt;دستورهای بالا رو در عمل ببینیم تا بیشتر توضیح بدم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;#فرا خواندن کتابخانه‌ی Opencv
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cv2&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#بارگذاری یک عکس از آدرسی در حافظه
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mrFox.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#بررسی می‌کنیم که آیا عکس به شکل صحیح بارگذاری شده است یا نه
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Coud not open or find the image&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#با این دستور عکس رنگی را به سیاه و سفید تبدیل می‌کنیم
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grayImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cvtColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COLOR_BGR2GRAY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#ذخیره نتیجه تبدیل عکس رنگی به سیاه و سفید
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imwrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;grayImage.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grayImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#ایجاد پنجره برای نمایش عکس‌ها
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;namedWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Image&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WINDOW_AUTOSIZE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;namedWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Gray Image&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WINDOW_NORMAL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#نمایش عکس‌ها
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Image&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Gray Image&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;grayImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#صبر می‌کنیم تا یک کلید فشرده شود
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;waitKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img src=&quot;/assets/post-images/opencv/basic-image-operations-in-opencv/opencv_read_images_display.jpg&quot; alt=&quot;Open and display images in Opencv&quot; style=&quot;width:600px;height:auto;display: block;margin: 0 auto;&quot; /&gt; 
 &lt;img src=&quot;/assets/post-images/opencv/basic-image-operations-in-opencv/opencv_read_images_folder.png&quot; alt=&quot;Open and display images in Opencv (folder)&quot; style=&quot;width:600px;height:auto;display: block;margin: 0 auto;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;دستور &lt;em&gt;imread&lt;/em&gt; دو ورودی می‌گیره، ورودی اول اسم و آدرس عکس ذخیره شده در حافظه و ورودی دوم اون یک فلک است که color type عکس رو مشخص می‌کنه.&lt;/p&gt;

&lt;p dir=&quot;ltr&quot; style=&quot;text-align: left;&quot;&gt;
  &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;&lt;tt class=&quot;descclassname&quot;&gt;cv2.&lt;/tt&gt;&lt;tt class=&quot;descname&quot;&gt;&lt;span class=&quot;highlighted&quot;&gt;imread&lt;/span&gt;&lt;/tt&gt;&lt;big&gt;(&lt;/big&gt;filename&lt;span class=&quot;optional&quot;&gt;[&lt;/span&gt;, flags&lt;span class=&quot;optional&quot;&gt;]&lt;/span&gt;&lt;big&gt;)&lt;/big&gt;&lt;/strong&gt;&lt;/span&gt;
&lt;/p&gt;

&lt;p dir=&quot;ltr&quot; style=&quot;text-align: left;&quot;&gt;
  &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;Parameters:&lt;/strong&gt;&lt;/span&gt;
&lt;/p&gt;

&lt;ul class=&quot;first last simple&quot; dir=&quot;ltr&quot;&gt;
  &lt;li style=&quot;text-align: left;&quot;&gt;
    &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;filename&lt;/strong&gt; – Name of file to be loaded.&lt;/span&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;flags&lt;/strong&gt; –&lt;/span&gt; &lt;p style=&quot;text-align: left;&quot;&gt;
      &lt;span style=&quot;color: #034239;&quot;&gt;Flags specifying the color type of a loaded image:&lt;/span&gt;
    &lt;/p&gt;
    
    &lt;ul&gt;
      &lt;li style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;CV_LOAD_IMAGE_ANYDEPTH &amp;#8211; If set, return 16-bit/32-bit image when the input has the corresponding depth, otherwise convert it to 8-bit.&lt;/span&gt;
      &lt;/li&gt;
      &lt;li style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;CV_LOAD_IMAGE_COLOR &amp;#8211; If set, always convert image to the color one&lt;/span&gt;
      &lt;/li&gt;
      &lt;li style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;CV_LOAD_IMAGE_GRAYSCALE &amp;#8211; If set, always convert image to the grayscale one&lt;/span&gt;
      &lt;/li&gt;
      &lt;li style=&quot;text-align: left;&quot;&gt;
        &lt;dl class=&quot;first docutils&quot;&gt;
          &lt;dt&gt;
            &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;&amp;gt;0&lt;/strong&gt; Return a 3-channel color image.&lt;/span&gt;
          &lt;/dt&gt;
          
          &lt;dd&gt;
            &lt;div class=&quot;first last admonition note&quot;&gt;
              &lt;p class=&quot;first admonition-title&quot;&gt;
                &lt;span style=&quot;color: #034239;&quot;&gt;Note&lt;/span&gt;
              &lt;/p&gt;
              
              &lt;p class=&quot;last&quot;&gt;
                &lt;span style=&quot;color: #034239;&quot;&gt;In the current implementation the alpha channel, if any, is stripped from the output image. Use negative value if you need the alpha channel.&lt;/span&gt;
              &lt;/p&gt;
            &lt;/div&gt;
          &lt;/dd&gt;
        &lt;/dl&gt;
      &lt;/li&gt;
      
      &lt;li style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;=0&lt;/strong&gt; Return a grayscale image.&lt;/span&gt;
      &lt;/li&gt;
      &lt;li style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;&amp;lt;0&lt;/strong&gt; Return the loaded image as is (with alpha channel).&lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ما می‌توینم بجای سه Falg بالا از 1، 0 و -1 استفاده کنیم. همچنین مقدار پیش‌فرض ورودی دوم CV_LOAD_IMAGE_COLOR است.&lt;/p&gt;

&lt;p&gt;دقت کنید  اگر عکسی که آدرس اون رو به دستور &lt;em&gt;imread&lt;/em&gt; می‌دهیم وجود نداشته باشه ما خطایی نمی‌گیریم (در عمل یک عکس خالی [None] ایجاد میشه)، برای همین بهتره چک کنیم که آیا عکس به درستی بارگذاری شده یا نه [خط ۸ و ۹.]&lt;/p&gt;

&lt;p&gt;در خط ۱۲ با استفاده از دستور &lt;em&gt;cvtColor&lt;/em&gt; می‌توانیم رنگ عکس رو تغییر بدهیم، توضیح کامل این دستور در [این لینک][3].&lt;/p&gt;

&lt;p&gt;در خط ۱۵ ما عکس خاکستری تولید شده از روی عکس اصلی رو با دستور &lt;em&gt;imwrite&lt;/em&gt; ذخیره کرده‌ایم.
به خط ۱۸ توجه کنید، برای نمایش تصاویر ابتدا به وسیله‌ی دستور_cv2.namedWindow_ یک پنجره ایجاد می‌کتیم، این دستور جدا از اسم پنجره سه پارامتر دیگه هم می‌گیره:&lt;/p&gt;

&lt;p dir=&quot;ltr&quot; style=&quot;text-align: left;&quot;&gt;
  &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;&lt;tt class=&quot;descclassname&quot;&gt;cv2.&lt;/tt&gt;&lt;tt class=&quot;descname&quot;&gt;&lt;span class=&quot;highlighted&quot;&gt;namedWindow&lt;/span&gt;&lt;/tt&gt;&lt;big&gt;(&lt;/big&gt;winname&lt;span class=&quot;optional&quot;&gt;[&lt;/span&gt;, flags&lt;span class=&quot;optional&quot;&gt;]&lt;/span&gt;&lt;big&gt;)&lt;/big&gt;&lt;/strong&gt;&lt;/span&gt;
&lt;/p&gt;

&lt;p dir=&quot;ltr&quot;&gt;
  &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;Parameters:&lt;/strong&gt;.&lt;/span&gt;
&lt;/p&gt;

&lt;ul class=&quot;first last simple&quot; dir=&quot;ltr&quot;&gt;
  &lt;li&gt;
    &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;name&lt;/strong&gt; – Name of the window in the window caption that may be used as a window identifier.&lt;/span&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;flags&lt;/strong&gt; –Flags of the window. The supported flags are:&lt;/span&gt; &lt;ul&gt;
      &lt;li&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;WINDOW_NORMAL&lt;/strong&gt; If this is set, the user can resize the window (no constraint).&lt;/span&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;WINDOW_AUTOSIZE&lt;/strong&gt; If this is set, the window size is automatically adjusted to fit the displayed image, and you cannot change the window size manually.&lt;/span&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;WINDOW_OPENGL&lt;/strong&gt; If this is set, the window will be created with OpenGL support&lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;این سه پارامتر نوع و اندازه‌ی پنجره رو مشخص می‌کنه. [&lt;span style=&quot;color: #ff0000;&quot;&gt;من در اوبونتو یک باگ دارم و اون اینکه سایز پنجره هنگام استفاده از دستور WINDOW_AUTOSIZE به تناسب صفحه‌ی نمایشم تغییر نمی‌کنه.&lt;/span&gt;]&lt;/p&gt;

&lt;p&gt;سپس در خط ۲۲ تصویرمون رو نمایش می‌دهیم به این شکل که ابتدا اسم پنجره‌ای که می‌خواهیم تصویر در اون نمایش داده بشه رو می‌گیم (همون اسمی که در خط ۱۸ و ۱۹ ایجاد کردیم) و سپس اسم متغیر عکسی که می‌خواهیم نمایش داده بشه رو وارد می‌کنیم.&lt;/p&gt;

&lt;p&gt;در مورد دستور خط آخر [&lt;em&gt;cv2.waitKey(0)&lt;/em&gt;]، این دستور پنجره‌ها تا زمانی که یک کلید فشرده بشه باز نگه می‌داره، اگر این دستور رو وارد نکنیم عملا نتیجه‌ی کار رو نمی‌بینم (چون پنجره‌ها بلافاصله بسته می‌شوند.)&lt;/p&gt;

&lt;h3 id=&quot;برش-و-تغییر-اندازهی-عکس-در-opencv&quot;&gt;&lt;strong&gt;برش و تغییر اندازه‌ی عکس در OpenCV:&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;با استفاده از دستور &lt;em&gt;resize&lt;/em&gt;  می‌توانیم عکس‌ها رو بزرگ و یا کوچیک کنیم،. معمولا برای افزایش سرعت، محاسبات رو بر روی عکس‌هایی که سایر اون‌ها رو کم کره‌ایم انجام می‌دهیم و بعد از اتمام محاسبات میایم و عکس رو به اندازه‌ی اصلی خودش بر می‌گردونیم. همچنین برش زدن عکس بهمون کمک می‌کنه تا فقط روی اون قسمت‌هایی از تصویر که اهمیت دارن پردازش انجام بدهیم. شیوه‌ی کوچک و بزرگ کردن تصویر در OpenCV و همچنین برش تصویر رو در ادامه می‌بینیم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt; &lt;span class=&quot;n&quot;&gt;کتابخانه&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;‌&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ی&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OpenCV&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;رو&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;فرا&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;می&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;‌&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;خونیم&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;cv2&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# مانند قبل تصویر رو بارگذاری کرده و بررسی می‌کینم آیابه درستی خوانده شده یا نه
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;originalImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mrFox.jpg&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;originalImage&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Oh! we have problem in reading image!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# تصویر رو با نسبت‌های داده شده .۲ و.۱ کوچک می‌کنیم
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scaleDown&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;originalImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interpolation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTER_LINEAR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# تصویر را به نسبت ۲ و ۲ بزرگ می‌کنیم
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scaleUp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;originalImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interpolation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INTER_LINEAR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# از ۲۵۰ تا ۳۰۰ محورایکس و ۱۰۰ تا ۲۰۰ محور ایگرگ را از تصویر اصلی جدا کرده و در متغیر جدید ذخیره می‌کنیم
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;originalImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# مثل قبل تصاویررا نمایش می‌دهیم
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Original&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;originalImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Scaled Down&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scaleDown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Scaled Up&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scaleUp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imshow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Cropped Image&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;crop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;cv2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;waitKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;&lt;img loading=&quot;lazy&quot; class=&quot;wp-image-326 aligncenter&quot; src=&quot;https://mh-salari.me/wp-content/uploads/2-300x169.jpg&quot; alt=&quot;&quot; width=&quot;533&quot; height=&quot;300&quot; srcset=&quot;https://mh-salari.me/wp-content/uploads/2-300x169.jpg 300w, https://mh-salari.me/wp-content/uploads/2-768x431.jpg 768w, https://mh-salari.me/wp-content/uploads/2-1024x575.jpg 1024w, https://mh-salari.me/wp-content/uploads/2.jpg 1280w&quot; sizes=&quot;(max-width: 533px) 100vw, 533px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ما در برنامه‌ی بالا اومدیم و نسبت طول و عرض عکس رو با استفاده از ضرایب fx و fy تغییر دادم، اما اگر بخواهیم تصویر رو به سایز دقیقی مثل ۶۴۰*۴۸۰ تغییر اندازه بدهیم باید به شکل زیر عمل کنیم:&lt;/p&gt;

&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;resized = cv2.resize(originalImage,(640,480))
&lt;/pre&gt;

&lt;p&gt;این که اومدیم و سایز عکس رو به شکل فله‌ای با دستور بالا تغییر دادیم خیلی جالب نیست، نه؟ بهتره به شکل زیر کار کنیم تا ابعاد تصویر بهم نریزه:&lt;/p&gt;

&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;python&quot;&gt;# کتابخانه‌ی OpenCV رو فرا می‌خونیم
import cv2

# مانند قبل تصویر رو بارگذاری کرده و بررسی می‌کینم آیابه درستی خوانده شده یا نه
image = cv2.imread(&quot;mrFox.jpg&quot;)
if image is None:
    print(&quot;Oh! we have problem in reading image!&quot;)

# برای این که نسبت‌های عکس بهم نریزه باید مقادیر طول و عرض عکس رو ذخیره کنیم و
# و به نسبت اون‌ها عکس رو تغییر ابعاد بدهیم
xRatio = 480.0
r = xRatio / image.shape[1]
dim = (int(xRatio), int(image.shape[0] * r))

# تغییر ابعاد عکس
resized = cv2.resize(image, dim, interpolation=cv2.INTER_AREA)
cv2.imshow(&quot;Original Image&quot;, image)
cv2.imshow(&quot;resized Image&quot;, resized)
# چاپ ابعاد اصلی و ابعاد تغییر یافته
print(&quot;Original image size: &quot;, image.shape)
print(&quot;Resized image size: &quot;, dim)
cv2.waitKey(0)&lt;/pre&gt;

&lt;p&gt;&lt;img loading=&quot;lazy&quot; class=&quot;wp-image-328 aligncenter&quot; src=&quot;https://mh-salari.me/wp-content/uploads/3-300x169.jpg&quot; alt=&quot;&quot; width=&quot;533&quot; height=&quot;300&quot; srcset=&quot;https://mh-salari.me/wp-content/uploads/3-300x169.jpg 300w, https://mh-salari.me/wp-content/uploads/3-768x431.jpg 768w, https://mh-salari.me/wp-content/uploads/3-1024x575.jpg 1024w, https://mh-salari.me/wp-content/uploads/3.jpg 1280w&quot; sizes=&quot;(max-width: 533px) 100vw, 533px&quot; /&gt;&lt;/p&gt;

&lt;p&gt;به کاربرد &lt;code class=&quot;EnlighterJSRAW&quot;&gt;.shape _دقت کنید. قبلا در [این پست][2] در موردش توضیح دادم.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;اطلاعات کامل دستور resize  رو هم اینجا میارم:&lt;/p&gt;

&lt;p dir=&quot;ltr&quot;&gt;
  &lt;code class=&quot;descclassname&quot;&gt;&amp;lt;span style=&quot;color: #034239;&quot;&amp;gt;cv2.&amp;lt;/span&amp;gt;_&lt;span style=&quot;color: #034239;&quot;&gt;&lt;code class=&quot;descname&quot;&gt;Resize_&lt;span class=&quot;sig-paren&quot;&gt;(&lt;/span&gt;src, dst, interpolation=CV_INTER_LINEAR&lt;span class=&quot;sig-paren&quot;&gt;)&lt;/span&gt;&amp;lt;/span&amp;gt;
&amp;lt;/p&amp;gt;

&lt;p dir=&quot;ltr&quot; style=&quot;text-align: left;&quot;&gt;
  &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;Parameters:&lt;/strong&gt;&lt;/span&gt;
&lt;/p&gt;

&lt;ul class=&quot;first last simple&quot; dir=&quot;ltr&quot;&gt;
  &lt;li style=&quot;text-align: left;&quot;&gt;
    &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;src&lt;/strong&gt; – input image.&lt;/span&gt;
  &lt;/li&gt;
  &lt;li style=&quot;text-align: left;&quot;&gt;
    &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;dst&lt;/strong&gt; – output image; it has the size &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;dsize&amp;lt;/span&amp;gt;_ (when it is non-zero) or the size computed from &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;src.size()&amp;lt;/span&amp;gt;_, &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;fx&amp;lt;/span&amp;gt;_, and &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;fy&amp;lt;/span&amp;gt;_; the type of &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;dst&amp;lt;/span&amp;gt;_ is the same as of &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;src&amp;lt;/span&amp;gt;_.&amp;lt;/span&amp;gt;
  &amp;lt;/li&amp;gt;
  &lt;li style=&quot;text-align: left;&quot;&gt;
    &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;dsize&lt;/strong&gt; –output image size; if it equals zero, it is computed as:&lt;/span&gt; &lt;div class=&quot;math&quot;&gt;
      &lt;p&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;img src=&quot;https://docs.opencv.org/2.4/_images/math/35ed0468ed221de8a5f35516bceafda9788cd015.png&quot; alt=&quot;\texttt{dsize = Size(round(fx*src.cols), round(fy*src.rows))}&quot; /&gt;&lt;/span&gt;
      &lt;/p&gt;
    &lt;/div&gt;
    
    &lt;p&gt;
      &lt;span style=&quot;color: #034239;&quot;&gt;Either &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;dsize&amp;lt;/span&amp;gt;_ or both &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;fx&amp;lt;/span&amp;gt;_ and &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;fy&amp;lt;/span&amp;gt;_ must be non-zero.&amp;lt;/span&amp;gt;&amp;lt;/li&amp;gt; 
      
      &lt;li style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;fx&lt;/strong&gt; –scale factor along the horizontal axis; when it equals 0, it is computed as&lt;/span&gt; &lt;div class=&quot;math&quot;&gt;
          &lt;p&gt;
            &lt;span style=&quot;color: #034239;&quot;&gt;&lt;img src=&quot;https://docs.opencv.org/2.4/_images/math/68bc15bc90b1ec313d34f5d72485fa04c51f5c3e.png&quot; alt=&quot;\texttt{(double)dsize.width/src.cols}&quot; /&gt;&lt;/span&gt;
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      
      &lt;li style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;fy&lt;/strong&gt; –scale factor along the vertical axis; when it equals 0, it is computed as&lt;/span&gt; &lt;div class=&quot;math&quot;&gt;
          &lt;p&gt;
            &lt;span style=&quot;color: #034239;&quot;&gt;&lt;img src=&quot;https://docs.opencv.org/2.4/_images/math/af495c626474d56d29d356d581a18f143109e972.png&quot; alt=&quot;\texttt{(double)dsize.height/src.rows}&quot; /&gt;&lt;/span&gt;
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/li&gt;
      
      &lt;li&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;interpolation&lt;/strong&gt; –&lt;/span&gt; &lt;p style=&quot;text-align: left;&quot;&gt;
          &lt;span style=&quot;color: #034239;&quot;&gt;interpolation method:&lt;/span&gt;
        &lt;/p&gt;
        
        &lt;ul&gt;
          &lt;li style=&quot;text-align: left;&quot;&gt;
            &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;INTER_NEAREST&lt;/strong&gt; &amp;#8211; a nearest-neighbor interpolation&lt;/span&gt;
          &lt;/li&gt;
          &lt;li style=&quot;text-align: left;&quot;&gt;
            &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;INTER_LINEAR&lt;/strong&gt; &amp;#8211; a bilinear interpolation (used by default)&lt;/span&gt;
          &lt;/li&gt;
          &lt;li style=&quot;text-align: left;&quot;&gt;
            &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;INTER_AREA&lt;/strong&gt; &amp;#8211; resampling using pixel area relation. It may be a preferred method for image decimation, as it gives moire’-free results. But when the image is zoomed, it is similar to the &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;INTER_NEAREST&amp;lt;/span&amp;gt;_ method.&amp;lt;/span&amp;gt;
          &amp;lt;/li&amp;gt;
          &lt;li style=&quot;text-align: left;&quot;&gt;
            &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;INTER_CUBIC&lt;/strong&gt; &amp;#8211; a bicubic interpolation over 4&amp;#215;4 pixel neighborhood&lt;/span&gt;
          &lt;/li&gt;
          &lt;li style=&quot;text-align: left;&quot;&gt;
            &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;INTER_LANCZOS4&lt;/strong&gt; &amp;#8211; a Lanczos interpolation over 8&amp;#215;8 pixel neighborhood&lt;/span&gt;
          &lt;/li&gt;
        &amp;lt;/ul&amp;gt;
      &amp;lt;/li&amp;gt;&amp;lt;/ul&amp;gt; 
      
      &lt;p&gt;
        اگر دقت کنید در برنامه‌ی بالا ما تصاویر رو مستقیم نمایش دادیم و مثل قبل نبود که ابتدا یک پنجره رو ایجاد کنیم و سپس تصویر رو نمایش بدیم، خوب این هم یک جورشه:-) [وقت‌هایی از این روش نمایش تصویر استفاده می‌کنیم که نمی‌خوایم روی سایز پنجره تغییری ایجاد کنیم، منظورم همون سه‌تا پارامتر دستور  _cv2.namedWindow_ است.]
      &lt;/p&gt;
      
      &lt;p&gt;
        &amp;nbsp;
      &lt;/p&gt;
      
      &lt;h3&gt;
        &lt;strong&gt;چرخش عکس در OpenCV:&lt;/strong&gt;
      &lt;/h3&gt;
      
      &lt;p&gt;
        با OpenCV می‌توان عکس رو از هر نقطه‌ای (هر مرکزی) و با هر زاویه‌‌ی چرخش دلخواهی بچرخونیم.
      &lt;/p&gt;
      
      &lt;p&gt;
        در OpenCV چرخش‌ها به شکل یک ماتریس 2&amp;#215;3 بیان می‌شن به این علت که چرخش عضوی از کلاسی از تبدیلات به اسم Affine Transform است (بعدا بیشتر در موردش صحبت می‌کنیم) بیاید اول شکل ریاضی کار رو ببینیم:
      &lt;/p&gt;
      
      &lt;p dir=&quot;ltr&quot; style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;rotMat = getRotationMatrix2D(center, angle, scale)&lt;/strong&gt;&lt;/span&gt;
      &lt;/p&gt;
      
      &lt;p id=&quot;math--what-is-inside-the-rotation-matrix&quot; dir=&quot;ltr&quot; style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;getRotationMatrix2D &lt;/strong&gt;returns the following matrix&lt;strong&gt; :&lt;/strong&gt;&lt;/span&gt;
      &lt;/p&gt;
      
      &lt;p&gt;
        &lt;center dir=&quot;ltr&quot;&gt;
          &lt;span style=&quot;color: #034239;&quot;&gt;&lt;strong&gt;&lt;img src=&quot;https://www.learnopencv.com/wp-content/uploads/2017/11/ocfb-d1-m4-rotation-matrix.png&quot; /&gt;&lt;/strong&gt;&lt;/span&gt;
        &lt;/center&gt;
      &lt;/p&gt;
      
      &lt;p dir=&quot;ltr&quot; style=&quot;text-align: left;&quot;&gt;
        &lt;span style=&quot;color: #034239;&quot;&gt;Where,&lt;/span&gt;&lt;br /&gt; &lt;span style=&quot;color: #034239;&quot;&gt; &lt;strong&gt; &lt;span class=&quot;mathjax&quot;&gt;&lt;span id=&quot;MathJax-Element-1-Frame&quot; class=&quot;MathJax&quot; tabindex=&quot;0&quot; role=&quot;presentation&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;&amp;#x03B1;&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-1&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-2&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-3&quot; class=&quot;mi&quot;&gt;α&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt; &lt;/strong&gt;is given by&lt;strong&gt; scale * cos (angle), &lt;span class=&quot;mathjax&quot;&gt;&lt;span id=&quot;MathJax-Element-2-Frame&quot; class=&quot;MathJax&quot; tabindex=&quot;0&quot; role=&quot;presentation&quot; data-mathml=&quot;&amp;lt;math xmlns=&amp;quot;http://www.w3.org/1998/Math/MathML&amp;quot;&amp;gt;&amp;lt;mi&amp;gt;&amp;#x03B2;&amp;lt;/mi&amp;gt;&amp;lt;/math&amp;gt;&quot;&gt;&lt;span id=&quot;MathJax-Span-4&quot; class=&quot;math&quot;&gt;&lt;span id=&quot;MathJax-Span-5&quot; class=&quot;mrow&quot;&gt;&lt;span id=&quot;MathJax-Span-6&quot; class=&quot;mi&quot;&gt;β&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt; is given by&lt;strong&gt; scale * sin (angle)&lt;/strong&gt;&lt;/span&gt;
      &lt;/p&gt;
      
      &lt;p style=&quot;text-align: right;&quot;&gt;
        پس ما برای استفاده از دستور بالا به مرکز و همچین زاویه‌ی چرخش احتیاج داریم، ماتریس &lt;strong&gt;rotMat&lt;/strong&gt; می‌تونه با تابع &lt;strong&gt;warpAffine&lt;/strong&gt; استفاده شه تا تصویر دوران یافته رو ایجاد کنیم، بریم و کدهای برنامه رو ببینم:
      &lt;/p&gt;
      
      &lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;python&quot;&gt;# کتابخانه‌ی OpenCV رو فرا می‌خونیم
import cv2

# مانند قبل تصویر رو بارگذاری کرده و بررسی می‌کینم آیابه درستی خوانده شده یا نه
image = cv2.imread(&quot;hmrFox.jpg&quot;)
if image is None:
    print(&quot;Oh! we have problem in reading image!&quot;)

# طول و عرض تصویر رو استخراج کرده و با استفاده از اون مرکز عکس رو پیدا می‌کنیم
(h, w) = image.shape[:2]
center = (w / 2, h / 2)
rotationAngle = 180
scaleFactor = 1.0
# عکس رو 180 درجه می‌چرخونیم
rotationMatrix = cv2.getRotationMatrix2D(center, rotationAngle, scaleFactor)
rotated = cv2.warpAffine(image, rotationMatrix, (w, h))
cv2.imshow(&quot;rotated 180 deg&quot;, rotated)

# عکس رو +45 درجه می‌چرخونیم
rotationMatrix = cv2.getRotationMatrix2D(center, 45, scaleFactor)
rotated = cv2.warpAffine(image, rotationMatrix, (w, h))
cv2.imshow(&quot;rotated +45 deg&quot;, rotated)

# عکس رو -45 درجه می‌چرخونیم
rotationMatrix = cv2.getRotationMatrix2D(center, -45, scaleFactor)
rotated = cv2.warpAffine(image, rotationMatrix, (w, h))
cv2.imshow(&quot;rotated -45 deg&quot;, rotated)

# نمابش عکس اصلی
cv2.imshow(&quot;Original Image&quot;, image)

# ماتریس rotationMatrix رو نمایش می‌دهیم
print(rotationMatrix)

# صبر می‌کنیم تا کاربر کلیدی را فشار دهد
cv2.waitKey(0)&lt;/pre&gt;
      
      &lt;h3&gt;
        &lt;img loading=&quot;lazy&quot; class=&quot;wp-image-329 aligncenter&quot; src=&quot;https://mh-salari.me/wp-content/uploads/4-300x169.jpg&quot; alt=&quot;&quot; width=&quot;532&quot; height=&quot;300&quot; srcset=&quot;https://mh-salari.me/wp-content/uploads/4-300x169.jpg 300w, https://mh-salari.me/wp-content/uploads/4-768x431.jpg 768w, https://mh-salari.me/wp-content/uploads/4-1024x575.jpg 1024w, https://mh-salari.me/wp-content/uploads/4.jpg 1280w&quot; sizes=&quot;(max-width: 532px) 100vw, 532px&quot; /&gt;
      &lt;/h3&gt;
      
      &lt;h3&gt;
        ذخیره‌ی عکس با کیفیت دلخواه:
      &lt;/h3&gt;
      
      &lt;p&gt;
        اول بیایم و تابع ذخیره عکس رو با جزئیات ببینیم:
      &lt;/p&gt;
      
      &lt;p dir=&quot;ltr&quot;&gt;
        &lt;strong&gt;cv2.imwrite(filename, img[, params])&lt;/strong&gt;
      &lt;/p&gt;
      
      &lt;p dir=&quot;ltr&quot;&gt;
        &lt;strong&gt;Parameters: &lt;/strong&gt;
      &lt;/p&gt;
      
      &lt;ul dir=&quot;ltr&quot;&gt;
        &lt;li&gt;
          &lt;strong&gt;filename&lt;/strong&gt; – Name of the file.
        &lt;/li&gt;
        &lt;li&gt;
          &lt;strong&gt;image&lt;/strong&gt; – Image to be saved.
        &lt;/li&gt;
        &lt;li&gt;
          &lt;strong&gt;params&lt;/strong&gt; –Format-specific save parameters encoded as pairs &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;paramId_1,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pre&quot;&amp;gt;paramValue_1,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pre&quot;&amp;gt;paramId_2,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pre&quot;&amp;gt;paramValue_2,&amp;lt;/span&amp;gt; &amp;lt;span class=&quot;pre&quot;&amp;gt;...&amp;lt;/span&amp;gt;_ . The following parameters are currently supported: &lt;ul&gt;
            &lt;li&gt;
              For JPEG, it can be a quality ( &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;CV_IMWRITE_JPEG_QUALITY&amp;lt;/span&amp;gt;_ ) from 0 to 100 (the higher is the better). Default value is 95.
            &amp;lt;/li&amp;gt;
            &lt;li&gt;
              For PNG, it can be the compression level ( &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;CV_IMWRITE_PNG_COMPRESSION&amp;lt;/span&amp;gt;_ ) from 0 to 9. A higher value means a smaller size and longer compression time. Default value is 3.
            &amp;lt;/li&amp;gt;
            &lt;li&gt;
              For PPM, PGM, or PBM, it can be a binary format flag ( &lt;code class=&quot;docutils literal&quot;&gt;&amp;lt;span class=&quot;pre&quot;&amp;gt;CV_IMWRITE_PXM_BINARY&amp;lt;/span&amp;gt;_ ), 0 or 1. Default value is 1.
            &amp;lt;/li&amp;gt;
          &amp;lt;/ul&amp;gt;
        &amp;lt;/li&amp;gt;
      &amp;lt;/ul&amp;gt;
      
      &lt;p&gt;
        پس ما می‌تونیم کیفیت دلخواه ذخیره‌ی عکسمون بسته به فرمت فشرده‌سازی اون داشته باشیم. یک مثال با هم ببینیم:
      &lt;/p&gt;
      
      &lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;python&quot;&gt;# فراخوانی کتابخانه‌های مورد نیاز
import cv2

# بازگگذاری عکس
image = cv2.imread('hmrFox.jpg')

# بررسی معتبر بودن عکس ورودی
if image is None:
    print(&quot;Error in readig image&quot;)
    exit()

# تبدیل عکس رنگی به خاکستری
gray = cv2.cvtColor(image,cv2.COLOR_BGR2GRAY)

# ایجاد پنجره جهت ذخیره‌ی نمایش عکس‌ها
cv2.namedWindow('Image', cv2.WINDOW_AUTOSIZE)
cv2.namedWindow('Gray Image', cv2.WINDOW_AUTOSIZE)

key = 0
# حلقه‌ی بینهایت تا زمانی که کلید q فشرده شود
while key != ord('q'):

# نمایش عکس‌ها
    cv2.imshow('Image',image)
    cv2.imshow('Gray Image', gray)
    key = cv2.waitKey(0) &amp;amp; 0xFF

# ذخیره‌ی عکس خاکستری با کیفیت ۵
cv2.imwrite('Gray.jpg',gray, [cv2.IMWRITE_JPEG_QUALITY,10])

# بستن تمام پنجره‌های باز
cv2.destroyAllWindows()&lt;/pre&gt;
      
      &lt;p&gt;
        &lt;img loading=&quot;lazy&quot; class=&quot;size-medium wp-image-408 aligncenter&quot; src=&quot;https://mh-salari.me/wp-content/uploads/quality-300x261.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;261&quot; srcset=&quot;https://mh-salari.me/wp-content/uploads/quality-300x261.png 300w, https://mh-salari.me/wp-content/uploads/quality.png 438w&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; /&gt;
      &lt;/p&gt;
      
      &lt;p&gt;
        فکر نکنم نیاز به توضیح خاصی داشته باشیم.
      &lt;/p&gt;
      
      &lt;p&gt;
        &amp;nbsp;
      &lt;/p&gt;
      
      &lt;hr /&gt;
      
      &lt;p&gt;
        جهت دانلودفایل‌های این آموزش می تونید به گیت‌هاب من (&lt;a href=&quot;https://github.com/mh-salari/My-Blog-OpenCV-Tutorials/tree/master/02-basic%20image%20operation&quot;&gt;به این آدرس&lt;/a&gt;) مراجعه کنید.
      &lt;/p&gt;
      
      &lt;p&gt;
        نویسنده: &lt;a href=&quot;https://mh-salari.me/&quot;&gt;محمد حسین سالاری&lt;/a&gt;
      &lt;/p&gt;

 [1]: https://mh-salari.me/install-opencv3-on-ubuntu-17-10/
 [2]: https://mh-salari.me/introduction-to-numpy/
 [3]: https://docs.opencv.org/3.0-beta/modules/imgproc/doc/miscellaneous_transformations.html#void%20cvtColor(InputArray%20src,%20OutputArray%20dst,%20int%20code,%20int%20dstCn)
&lt;/code&gt;&lt;/li&gt;&lt;/code&gt;&lt;/li&gt;&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/code&gt;&lt;/code&gt;&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/code&gt;&lt;/code&gt;&lt;/code&gt;&lt;/code&gt;&lt;/code&gt;&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/code&gt;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;</content><author><name>MohammadHossein Salari</name></author><category term="OpenCV" /><category term="Python" /><category term="OpenCV" /><summary type="html">در این نوشته یاد می‌گیرم که چطور یک عکس رو در OpenCV بخوانیم، روی اون اعمال مقدماتی‌ای همچون تغییر اندازه، برش، چرخش، تبدیل رنگ عکس به خاکستری و … رو انجام دهیم، عکس رو نمایش بدهیم و در نهایت نتیجه رو با فرمت دلخواه دخیره کنیم.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/post-images/opencv/basic-image-operations-in-opencv/basic_image_operations_in_opencv.jpg" /><media:content medium="image" url="/assets/post-images/opencv/basic-image-operations-in-opencv/basic_image_operations_in_opencv.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">دستورات کاربردی بعد از نصب اوبونتو</title><link href="/ubuntu-essentials/" rel="alternate" type="text/html" title="دستورات کاربردی بعد از نصب اوبونتو" /><published>2018-01-18T14:19:59+03:30</published><updated>2018-01-18T14:19:59+03:30</updated><id>/ubuntu-essentials</id><content type="html" xml:base="/ubuntu-essentials/">&lt;p&gt;من توی لینوکس تازه کارم و خیلی پیش میاد که می‌زنم همه‌چیز رو آجر می‌کنم و مجبور می‌شم کل سیستم عامل رو از اول نصب کنم، برای راحت‌تر شدن زندگیم کارهایی که بعد از نصب سیستم‌عامل جدید انجام می‌دم رو اینجا نوشته‌ام.&lt;/p&gt;

&lt;h2 id=&quot;git-رو-نصب-کنیم&quot;&gt;Git رو نصب کنیم:&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; apt update
&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; apt upgrade
&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; apt install git
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;تنظیمات اولیه گیت رو انجام بدیم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.name &lt;span class=&quot;s2&quot;&gt;&quot;your name&quot;&lt;/span&gt;
git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; user.email &lt;span class=&quot;s2&quot;&gt;&quot;your@email.com&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;zsh-رو-نصب-کنیم&quot;&gt;zsh رو نصب کنیم:&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;zsh
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;فعالش کنیم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;usermod &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /user/bin/zsh &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;USER&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;تنظیمات «اوه مای زیشل» رو نصب کنیم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;sh &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; -&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;zsh رو به فایل ترمینال‌هامون اضافه کنیم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; zsh | &lt;span class=&quot;nb&quot;&gt;sudo tee&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-a&lt;/span&gt; /etc/shells
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ترمینال پیشفرض رو zsh کنیم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;chsh &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; zsh&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;USER&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;ویدئو-پلیر-کله-قندی-رو-نصب-کنیم&quot;&gt;ویدئو پلیر کله قندی رو نصب کنیم:&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;vlc
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;دانلود-منیجر-uget-رو-نصب-کنیم&quot;&gt;دانلود منیجر &lt;em&gt;uGet&lt;/em&gt; رو نصب کنیم:&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;add-apt-repository ppa:plushuang-tw/uget-stable
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;uget
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;برای-انجام--شخصی-سازی-gnome-tweaks-رو-نصب-کنیم&quot;&gt;برای انجام  شخصی سازی &lt;em&gt;(GNOME) Tweaks&lt;/em&gt; رو نصب کنیم:&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;gnome-tweak-tool
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;h2 id=&quot;برای-گرفتن-اسکرین-شات-از-صفحه-shutter-رو-نصب-کنیم&quot;&gt;برای گرفتن اسکرین شات از صفحه &lt;em&gt;shutter&lt;/em&gt; رو نصب کنیم:&lt;/h2&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-repository ppa:linuxuprising/shutter
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;shutter
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name>MohammadHossein Salari</name></author><category term="Linux" /><category term="Linux" /><summary type="html">من توی لینوکس تازه کارم و خیلی پیش میاد که می‌زنم همه‌چیز رو آجر می‌کنم و مجبور می‌شم کل سیستم عامل رو از اول نصب کنم، برای راحت‌تر شدن زندگیم کارهایی که بعد از نصب سیستم‌عامل جدید انجام می‌دم رو اینجا نوشته‌ام.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/post-images/linux/ubuntu-essentials/ubuntu_essentials.png" /><media:content medium="image" url="/assets/post-images/linux/ubuntu-essentials/ubuntu_essentials.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">ایجاد شماره‌ی شناسایی منحصر به فرد در میکروکنترلرهای STM32</title><link href="/stm32-id/" rel="alternate" type="text/html" title="ایجاد شماره‌ی شناسایی منحصر به فرد در میکروکنترلرهای STM32" /><published>2017-09-05T00:00:00+04:30</published><updated>2017-09-05T00:00:00+04:30</updated><id>/stm32-id</id><content type="html" xml:base="/stm32-id/">&lt;p&gt;در میکروکنترلرهای STM32، شرکت ST هنگام ساخت هر قطعه یک ID با طول ۹۶ بیت رو به عنوان شماره‌ی منحصر به فرد داخل حافظه‌ی میکروکنترلر ذخیره میکنه تا هنگام انجام تست‌های کنترلر کیفت پردازنده‌ها بتونه بفهمه که اون قطعه از کجا اومده و از کدوم ویفر ساخته شده.
پس راحت‌ترین راه داشتن ID منحصر به فرد در میکروکنترلرهای STM32 اینه که ID ایجاد شده توسط شرکت ST رو بخونیم.&lt;/p&gt;

&lt;p&gt;Unique ID ذخیره شده در میکروکنترل‌های STM32 از سه بخش زیر تشکیل شده:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;مختصات X و Y روی ویفر که به شکل BCD ذخیره شده.&lt;/li&gt;
  &lt;li&gt;یک عدد بسیار بزرگ.&lt;/li&gt;
  &lt;li&gt;شماره‌ی ویفر.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;آدرس ذخیره این ID در هر خانواده‌ از پردازنده‌های ST متفاوته و مطابق جدول زیر است:&lt;/p&gt;

&lt;style type=&quot;text/css&quot;&gt;
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  overflow:hidden;padding:10px 5px;word-break:normal;}
.tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
  font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
.tg .tg-baqh{text-align:center;vertical-align:top}
.tg .tg-qssw{background-color:#E47600;text-align:left;vertical-align:top}
.tg-wrap {direction: ltr;}
@media screen and (max-width: 767px) {.tg {width: auto !important;}.tg col {width: auto !important;}.tg-wrap {overflow-x: auto;-webkit-overflow-scrolling: touch;margin: auto 0px;}}&lt;/style&gt;

&lt;div class=&quot;tg-wrap&quot;&gt;&lt;table class=&quot;tg&quot; style=&quot;undefined;table-layout: fixed; width: 213px&quot;&gt;
&lt;colgroup&gt;
&lt;col style=&quot;width: 86.25px&quot; /&gt;
&lt;col style=&quot;width: 126.25px&quot; /&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
  &lt;tr&gt;
    &lt;th class=&quot;tg-qssw&quot;&gt;Device line&lt;/th&gt;
    &lt;th class=&quot;tg-qssw&quot;&gt;Starting address&lt;/th&gt;
  &lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;F0, F3&lt;/td&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;0x1FFFF7AC&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;F1&lt;/td&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;0x1FFFF7E8&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;F2, F4&lt;/td&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;0x1FFF7A10&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;F7&lt;/td&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;0x1FF0F420&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;L0&lt;/td&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;0x1FF80050&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;L0, L1,&lt;br /&gt;Cat.1, Cat.2&lt;/td&gt;
    &lt;td class=&quot;tg-baqh&quot;&gt;0x1FF80050&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;&lt;/div&gt;

&lt;p&gt;با توجه به ۳۲ بیتی بودن حافظه‌ی میکروکنترلرهای STM32 می‌شه با استفاده از اشاره‌گرهای نوع (unsigned long (32bit به این ۹۶ بیت دیتا دسترسی پیدا کرد، به عنوان مثال برای پردازنده‌ی STM32f103 از کد زیر استفاده می‌کنیم:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x1FFFF7E8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x1FFFF7EC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x1FFFF7F0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;</content><author><name>MohammadHossein Salari</name></author><category term="STM32" /><category term="STM32" /><summary type="html">در میکروکنترلرهای STM32، شرکت ST هنگام ساخت هر قطعه یک ID با طول ۹۶ بیت رو به عنوان شماره‌ی منحصر به فرد داخل حافظه‌ی میکروکنترلر ذخیره میکنه تا هنگام انجام تست‌های کنترلر کیفت پردازنده‌ها بتونه بفهمه که اون قطعه از کجا اومده و از کدوم ویفر ساخته شده. پس راحت‌ترین راه داشتن ID منحصر به فرد در میکروکنترلرهای STM32 اینه که ID ایجاد شده توسط شرکت ST رو بخونیم.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="/assets/post-images/stm32/stm32-id/stm32-unique-id.jpg" /><media:content medium="image" url="/assets/post-images/stm32/stm32-id/stm32-unique-id.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>